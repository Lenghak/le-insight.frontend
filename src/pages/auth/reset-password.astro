---
import AuthLayout from "@/common/layouts/auth-layout.astro";
import RootLayout from "@/common/layouts/root-layout.astro";
import ResetPasswordForm from "@/modules/auth/components/reset-password-form";

import { getSession } from "auth-astro/server";

export const prerender = false;

const session = await getSession(Astro.request);
const email = session?.user.email ?? "";
const token = Astro.url.searchParams.get("token") ?? "";
---

<RootLayout title="Le-Insight | Reset Password">
  <AuthLayout
    title="Reset Password"
    description="Time to reset your password. Enter a new one to proceed."
  >
    <ResetPasswordForm
      client:load
      email={email}
      token={token}
    />
  </AuthLayout>
</RootLayout>
